<!DOCTYPE html>
<html lang= "es">
<head>
    <meta charset= "UTF-8">
    <meta name= "viewport" content= "width= device-width, initial-scale= 1.0">
    
    <meta http-equiv= "Content-Security-Policy" content= "upgrade-insecure-requests">
    
    <title>
    	TERABOX LINKS | PREMIUM
    </title>
    
    <script src= "https://cdn.tailwindcss.com"></script>
    
    <link href= "https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;800&display=swap" rel= "stylesheet">
    <link rel= "stylesheet" href= "https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    
    <style>
        :root {
            --primary: #2563eb;
            --bg-dark: #0a0a0c;
            --card-bg: rgba(20, 20, 25, 0.95);
            --wa-color: #25d366;
            --wa-dark: #128c7e;
            --wa-bg-chat: #e5ddd5;
        }
        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--bg-dark);
            color: #f8fafc;
            margin: 0;
            padding: 0;
            scroll-behavior: smooth;
        }

        .glass {
            background: var(--card-bg);
            backdrop-filter: blur(16px);
            -webkit-backdrop-filter: blur(16px);
            border: 1px solid rgba(255, 255, 255, 0.08);
        }

        .sticky-header {
            position: sticky;
            top: 0;
            z-index: 100;
            background-color: var(--bg-dark);
            padding-bottom: 4px;
        }

        .video-container {
            position: relative;
            padding-bottom: 56.25%;
            background: #000;
        }

        .controls-bar {
            height: 44px;
            margin-top: -1px;
            border-top: none;
            border-radius: 0 0 12px 12px;
        }

        /* --- NUEVA ANIMACIÃ“N PARA BOTÃ“N TERABOX --- */
        @keyframes pulse-yellow {
            0% { box-shadow: 0 0 0 0 rgba(234, 179, 8, 0.7); transform: scale(1); }
            50% { box-shadow: 0 0 0 12px rgba(234, 179, 8, 0); transform: scale(1.05); }
            100% { box-shadow: 0 0 0 0 rgba(234, 179, 8, 0); transform: scale(1); }
        }

        .btn-playing {
            animation: pulse-yellow 1.5s infinite !important;
            background-color: #eab308 !important; /* Cambia a amarillo/oro al sonar el video */
            color: black !important;
        }

        .main-content {
            padding: 12px 12px 100px 12px;
        }

        .skeleton {
            background: linear-gradient(90deg, #1f2937 25%, #374151 50%, #1f2937 75%);
            background-size: 200% 100%;
            animation: loading 1.5s infinite;
        }

        @keyframes loading {
            0% { background-position: 200% 0; }
            100% { background-position: -200% 0; }
        }

        .carousel-wrapper {
            display: flex;
            overflow-x: auto;
            scroll-snap-type: x mandatory;
            gap: 12px;
            padding: 8px 0;
            scrollbar-width: none;
        }
        .carousel-wrapper::-webkit-scrollbar { display: none; }

        .carousel-item {
            flex: 0 0 75%;
            width: 75%;
            scroll-snap-align: center;
        }

        @media (min-width: 640px) {
            .carousel-item { 
                flex: 0 0 35%; 
                width: 35%;
            }
        }

        .modal-overlay {
            display: none;
            position: fixed;
            inset: 0;
            z-index: 2000;
            background: rgba(0, 0, 0, 0.92);
            backdrop-filter: blur(12px);
        }
        .modal-overlay.active { 
            display: flex; 
        }

  /* AnimaciÃ³n de Pulso Chat */
  @keyframes wa-pulse {
    0% { box-shadow: 0 0 0 0 rgba(37, 211, 102, 0.7); }
    70% { box-shadow: 0 0 0 15px rgba(37, 211, 102, 0); }
    100% { box-shadow: 0 0 0 0 rgba(37, 211, 102, 0); }
  }

  /* BotÃ³n Lanzador */
  .wa-launcher {
    position: fixed;
    bottom: 25px;
    left: 20px;
    background-color: var(--wa-color);
    width: 40px;
    height: 40px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    box-shadow: 0 4px 12px rgba(0,0,0,0.3);
    z-index: 10000;
    animation: wa-pulse 2s infinite;
    transition: transform 0.3s ease;
  }
  .wa-launcher:active { transform: scale(0.9); }

  .wa-badge {
    position: absolute;
    top: -2px;
    right: -2px;
    background: #ff0000;
    color: white;
    border-radius: 50%;
    width: 22px;
    height: 22px;
    font-size: 12px;
    font-weight: bold;
    display: flex;
    align-items: center;
    justify-content: center;
    border: 2px solid white;
  }

  .wa-card {
    position: fixed;
    bottom: 90px;
    right: 20px;
    width: 320px;
    background: white;
    border-radius: 15px;
    box-shadow: 0 10px 30px rgba(0,0,0,0.25);
    display: none;
    flex-direction: column;
    z-index: 10001;
    font-family: 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
    overflow: hidden;
    transition: bottom 0.3s ease;
  }

  .wa-header {
    background: var(--wa-dark);
    color: white;
    padding: 15px;
    display: flex;
    justify-content: space-between;
    align-items: center;
  }
  .wa-header-info b { display: block; font-size: 15px; }
  .wa-header-info span { font-size: 12px; opacity: 0.9; }
  .wa-close { cursor: pointer; font-size: 24px; line-height: 1; }

  .wa-body {
    padding: 15px;
    background: var(--wa-bg-chat);
    max-height: 250px;
    min-height: 100px;
    overflow-y: auto;
  }
  .wa-bubble {
    background: white;
    padding: 12px;
    border-radius: 10px;
    font-size: 14px;
    color: #333;
    border-top-left-radius: 0;
    position: relative;
    box-shadow: 0 1px 2px rgba(0,0,0,0.1);
  }
  .typing { font-style: italic; color: #777; font-size: 13px; display: none; }

  .wa-footer {
    padding: 10px;
    background: #f0f0f0;
    display: flex;
    gap: 8px;
    align-items: center;
  }
  .wa-input {
    flex: 1;
    border: 1px solid #ccc;
    border-radius: 25px;
    padding: 10px 15px;
    outline: none;
    font-size: 16px; 
    color: black;
  }
  .wa-send {
    background: var(--wa-color);
    border: none;
    color: white;
    width: 40px;
    height: 40px;
    border-radius: 50%;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: background 0.2s;
  }
  .wa-send:hover { background: var(--wa-dark); }

  @media (max-width: 480px) {
    .wa-card { width: 90%; right: 5%; bottom: 85px; }
  }
    </style>
</head>

<body class= "select-none">

<div class= "wa-card" id= "waCard">
  <div class= "wa-header">
    <div class= "wa-header-info">
      <b>Soporte en lÃ­nea</b>
      <span id= "waStatus">Cargando estado...</span>
    </div>
    <div class= "wa-close" onclick= "toggleChat()">Ã—</div>
  </div>
  <div class= "wa-body">
    <div id= "waTyping" class= "wa-bubble typing">Escribiendo...</div>
    <div id= "waMsg" class= "wa-bubble" style= "display:none;">
        <b><center><span id= "pageTarget">esta pÃ¡gina</span></center></b><br>
        Hola! ðŸ‘‹ Dime Que PelÃ­cula o Serie Quieres Ver y Muy Pronto AquÃ­ La Podras Descargar
    </div>
  </div>
  <div class="wa-footer">
    <input type="text" id="waInput" class="wa-input" placeholder="Escribe tu mensaje ...">
    <button class= "wa-send" onclick= "sendToWhatsapp()">
      <svg width= "20" height= "20" viewBox= "0 0 24 24" fill= "white"><path d="M2.01 21L23 12 2.01 3 2 10l15 2-15 2z"/></svg>
    </button>
  </div>
</div>

<div class="wa-launcher" id="waLauncher" onclick="toggleChat()">
  <div class="wa-badge" id="waBadge">1</div>
  <img src="https://upload.wikimedia.org/wikipedia/commons/6/6b/WhatsApp.svg" width="32" alt="WhatsApp">
</div>

    <div id="news-modal" class="modal-overlay items-center justify-center p-4">
        <div class="glass w-full max-w-md rounded-3xl overflow-hidden shadow-2xl">
            <div class="p-4 border-b border-white/10 flex justify-between items-center bg-white/5">
                <h3 class="text-md font-extrabold text-yellow-400 flex items-center gap-2">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-7.714 2.143L11 21l-2.286-6.857L1 12l7.714-2.143L11 3z"/></svg>
                    NOVEDADES
                </h3>
                <button onclick="closeNewsModal()" class="p-2 hover:bg-white/10 rounded-full transition">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path d="M6 18L18 6M6 6l12 12" stroke-width="2.5"/></svg>
                </button>
            </div>
            
            <div id="news-list" class="p-3 space-y-2 max-h-[40vh] overflow-y-auto"></div>

            <div class="p-5 pt-2 bg-black/20 text-center">
                <p class="text-[12px] text-gray-300 font-medium">Si te gusta el contenido</p>
                <p class="text-[12px] text-gray-300 font-medium">Considera apoyarnos con una donaciÃ³n</p>
                <p class="text-[12px] text-gray-300 font-medium" style="color:#FF5733;">!!TU AYUDA MANTIENE VIVO ESTE PROYECTO!!</p>
                <button onclick="window.open('https://paypal.me/marzam', '_blank')" class="w-full h-10 glass hover:bg-white/10 rounded-xl transition-all flex items-center justify-center p-2 border-yellow-500/20 shadow-lg mt-2">
                    <img src="https://drive.google.com/thumbnail?id=1UFiNxdjFMg0-EQM0yCZR-L0x6cShoyWZ" alt="Paypal" class="h-full object-contain" />
                </button>
            </div>
        </div>
    </div>

    <div id="search-modal" class="modal-overlay items-center justify-center p-4">
        <div class="glass w-full max-w-2xl rounded-3xl overflow-hidden shadow-2xl flex flex-col max-h-[85vh]">
            <div class="p-4 border-b border-white/10 flex justify-between items-center bg-white/5">
                <div class="flex items-center gap-2 overflow-hidden">
                    <span class="w-1.5 h-5 bg-blue-600 rounded-full flex-shrink-0"></span>
                    <h3 id="search-modal-title" class="text-sm font-black text-white uppercase tracking-widest truncate">Resultados</h3>
                </div>
                <button onclick="closeSearchModal()" class="p-2 hover:bg-white/10 rounded-full transition">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path d="M6 18L18 6M6 6l12 12" stroke-width="2.5"/></svg>
                </button>
            </div>
            
            <div id="search-results-grid" class="p-4 grid grid-cols-2 sm:grid-cols-3 gap-4 overflow-y-auto"></div>
            
            <div id="search-empty" class="p-10 text-center hidden">
                <p class="text-gray-500 text-xs italic">No hay coincidencias...</p>
            </div>
        </div>
    </div>

    <div class="sticky-header">
        <div class="max-w-screen-xl mx-auto">
            <div class="video-container overflow-hidden">
                <iframe id="youtube-player" class="absolute inset-0 w-full h-full" src="" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe>
            </div>
            
            <div class="controls-bar glass flex items-center gap-2 px-2 mx-1">
                <button onclick="toggleFullScreen()" class="p-1.5 text-blue-400 hover:text-white transition-colors" title="Pantalla Completa">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 8V4m0 0h4M4 4l5 5m11-1V4m0 0h-4m4 0l-5 5M4 16v4m0 0h4m-4 0l5-5m11 5l-5-5m5 5v-4m0 4h-4"/></svg>
                </button>

                <div class="relative flex-grow">
                    <input type="text" id="image-search-input" placeholder="Buscar..." class="w-full bg-black/40 border border-white/10 rounded-lg py-1 pl-3 pr-8 text-[11px] focus:ring-1 focus:ring-blue-500 outline-none transition-all placeholder:text-gray-500" />
                    <button id="clear-search" class="absolute right-1.5 top-1/2 -translate-y-1/2 text-red-500 p-0.5" onclick="closeSearchModal()">
                        <svg class="w-3.5 h-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path d="M6 18L18 6M6 6l12 12" stroke-width="3"/></svg>
                    </button>
                </div>
                <button id="action-button" class="bg-blue-600 hover:bg-blue-500 text-white font-bold px-3 py-1.5 rounded-lg flex items-center justify-center gap-1.5 transition active:scale-95 text-[10px]">
                    <span id="btn-text">TERABOX</span>
                    <svg class="w-3.5 h-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4" stroke-width="2.5"/></svg>
                </button>
            </div>
        </div>
    </div>

    <div class="main-content max-w-screen-xl mx-auto">
        <div id="original-carousels-section" class="space-y-6"></div>
    </div>
    
    <button onclick="window.open('https://paypal.me/marzam', '_blank')" class="fixed bottom-6 right-6 z-50 glass p-1 rounded-2xl hover:scale-110 active:scale-90 transition-all shadow-2xl">
        <img src="https://drive.google.com/thumbnail?id=1UFiNxdjFMg0-EQM0yCZR-L0x6cShoyWZ" alt="PayPal" class="h-8 w-auto" />
    </button>
    
    <script>
    // --- LÃ“GICA YOUTUBE API PARA EL BOTÃ“N ---
    var player;
    // Carga la API de YouTube
    var tag = document.createElement('script');
    tag.src = "https://www.youtube.com/iframe_api";
    var firstScriptTag = document.getElementsByTagName('script')[0];
    firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);

    function onYouTubeIframeAPIReady() {
        player = new YT.Player('youtube-player', {
            events: {
                'onStateChange': onPlayerStateChange
            }
        });
    }

    function onPlayerStateChange(event) {
        const btn = document.getElementById('action-button');
        const btnText = document.getElementById('btn-text');
        
        // Estado 1 es "PLAYING" (Reproduciendo)
        if (event.data == YT.PlayerState.PLAYING) {
            btn.classList.add('btn-playing');
            btnText.innerText = "PELICULA COMPLETA AQUI";
        } else {
            // Si se pausa o termina, vuelve a la normalidad
            btn.classList.remove('btn-playing');
            btnText.innerText = "TERABOX";
        }
    }

    function toggleFullScreen() {
        if (!document.fullscreenElement) {
            document.documentElement.requestFullscreen().catch(err => {
                console.warn(`No se pudo activar pantalla completa: ${err.message}`);
            });
        } else {
            if (document.exitFullscreen) {
                document.exitFullscreen();
            }
        }
    }

    const allData = {
    	'pelÃ­c': {
    		title: 'SERIES Y PELICULAS', carousels: [ {
    				    id: 'PelÃ­culas1', data: [ {
    						    id: '1ATOJcg4vQJPMmoMCzqlQTxEr-vlhBzQY', youtubeId: 'f-V6dYUkneU', buttonId: '1mvtGF4bUXIjNOlU5DLbsBw', title: '2 BROKE GIRLS', subtitle: '2 Chicas Quebradas (2011-16)', subtitle2: 'T6E138', buscar: 'P3L02' }, {
    						    id: '1r2ppXqrB2LELgK6aGbOuwbFCywdzkfL-', youtubeId: 'BEsL884-zKQ', buttonId: '1nqfcrwkASrg9WL5P6lwE9Q', title: '2 HEARTS', subtitle: '2 Corazones (2020)', subtitle2: '', buscar: 'BUSCAR' }, {
								id: '1YHx1xAuPOkPIX4T_lrwlJyFc4mkF-CSS', youtubeId: 'heOcee5ZB9c', buttonId: '1sa2uaoP8BBVf45XYfkokIA', title: '3 METROS SOBRE EL CIELO', subtitle: '3 Metros Sobre El Cielo', buscar: 'BUSCAR' }, {
								id: '13InCrLYkfU9Q_9XNkHoVEyHp3jXauwYU/view', youtubeId: '1IYksquG4Ns', buttonId: '1jDwUjdoa4AQQ0Wzv7lmcsQ', title: '4X4', subtitle: '4X4 (2019)', buscar: 'Locked, P3ROIZG' }, {
								id: '1AnU5oOEuF3veMdxO7PkbBfZI7nAzkewe', youtubeId: 'XV3sbY51Xcc', buttonId: '1dGe9ocJmxjmJXMAi-MB5UQ', title: '5 DAYS OF WAR', subtitle: '5 DÃ­as De Guerra (2011)', buscar: 'P3L01' }, {
								id: '1PmtwCUg1XBUblAYT1n7wNFv9BPC5i9H8', youtubeId: 'eBvrywQtNUg', buttonId: '1xnKcrNhE-sKYSXnURcaghQ', title: '9', subtitle: 'Numero 9 (2009)', buscar: 'P3L02' }, 
				    	] }, {
						id: 'PelÃ­culasY', data: [ {
						    	id: '1WONs90wzZyzgtXiWCSw99Dh7havHdsDj', youtubeId: 'R87R7HA4zNc', buttonId: '1tns4NV6qqqkjaYzReAL88w', title: 'YA VEREMOS', subtitle: 'Ya Veremos (2018)', buscar: 'MÃ©xico, Mauricio Ochmann, Fernanda Castillo, Emiliano Aramayo, Erik Hayser, Rodrigo Cachero, Ariel Levy, Paco Rueda, Katsuhiro Honda, EstefanÃ­a Ahumada, Ignacio LÃ³pez Tarso, Isela Vega, Lupita Sandoval, Lorena VelÃ¡zquez, MartÃ­n Altomaro, Arturo Barba, P3L01, PelÃ­culas' }, {
						    	id: '1vm-Z65jtoTdz1tv-NnqxBxjBOGu6Pimo', youtubeId: 'ucmnTmYpGhI', buttonId: '1hjwcoKc3OHkVkxwGsGXUJQ', title: 'YOU DON\'T MESS WITH THE ZOHAN', subtitle: 'No Te Metas Con Zohan (2008)', buscar: 'Estados Unidos, Adam Sandler, John Turturro, Emmanuelle Chriqui, Nick Swardson, Lainie Kazan, Ido Mosseri, Rob Schneider, Michael Buffer, Mariah Carey, John Paul DeJoria, Dave Matthews, Shelley Berman, Chris Rock, Kevin Nealon, Henry Winkler, Charlotte Rae, Alec Mapa, Barry Livingston, Sayed Badreya, Daoud Heidami, Michael Leland, Rick Gifford, Daniel Zausmer, P3L01, PelÃ­culas' }, {
						    	id: '1_yE7hVLqoHzqDgarNLtLxaCn1B85pjmJ', youtubeId: 'rR1SzALB8IU', buttonId: '1Koqs_H1WYvt_KEfkV2bF0Q', title: 'YOU, ME AND DUPREE', subtitle: 'TÃº, Yo y Ahora Dupree (2006)', buscar: 'Estados Unidos, Owen Wilson, Kate Hudson, Matt Dillon, Michael Douglas, Seth Rogen, Amanda Detmer, Ralph Ting, Todd Stashwick, Bill Hader, Lance Armstrong, Jason Winer, Sidney S. Liufau, S3R01, PelÃ­culas' }, {
						    	id: '1mfVPNIP3M1W9ipPdf5lm_E5YhaE_CyUh', youtubeId: 'QWvMK5j-fXU', buttonId: '1d5DKgxMz49OdxDbp3sbtFA', title: 'YOUNG SHERLOCK HOLMES', subtitle: 'El Secreto De La PirÃ¡mide (1985)', buscar: 'Estados Unidos, Nicholas Rowe, Alan Cox, Sophie Ward, Anthony Higgins, Susan Fleetwood, Freddie Jones, Nigel Stock, Roger Ashton Griffiths, Earl Rhodes, Brian Oulton, Patrick Newell, Donald Eccles, Matthew Ryan, Matthew Blakstad, Jonathan Lacey, Walter Sparrow, Nadim Sawalha, Roger Brierley, Vivienne Chandler, Lockwood West, John Scott Martin, George Malpas, Willoughby Goddard, Michael Hordern, P3L01, PelÃ­culas' }, {
						    	id: '1rTAl_poAbKMI4luIquq3wwJbaj4kus-O', youtubeId: 'kDruG4M5R2A', buttonId: '11WmZEnddfYcY7gGeHH3Fuw', title: 'YUYU HAKUSHO', subtitle: 'YuYu Hakusho (2023)', subtitle2: '1 Temporada 5 Episodios', buscar: 'S3R01' }, {
						    	id: '1XNsjGaz99I-CdSrGtaoINVsoru8b3CPx', youtubeId: 'swH_nJUC5bo', buttonId: '1mQ3ntU1sJfWDKyEX4AqAmA', title: 'YUYU HAKUSHO GHOST FILES', subtitle: 'Yu Yu Hakusho Los Guerreros Del MÃ¡s AllÃ¡ (1992-94)', subtitle2: '4 Temporadas 112 Episodios + 1 OVA', buscar: 'S3R01' }, 
				    	] }, {
						id: 'PelÃ­culasZ', data: [ {
						    	id: '1mfVPNIP3M1W9ipPdf5lm_E5YhaE_CyUh', youtubeId: 'QWvMK5j-fXU', buttonId: '1d5DKgxMz49OdxDbp3sbtFA', title: 'YOUNG SHERLOCK HOLMES', subtitle: 'El Secreto De La PirÃ¡mide (1985)', buscar: 'Estados Unidos, Nicholas Rowe, Alan Cox, Sophie Ward, Anthony Higgins, Susan Fleetwood, Freddie Jones, Nigel Stock, Roger Ashton Griffiths, Earl Rhodes, Brian Oulton, Patrick Newell, Donald Eccles, Matthew Ryan, Matthew Blakstad, Jonathan Lacey, Walter Sparrow, Nadim Sawalha, Roger Brierley, Vivienne Chandler, Lockwood West, John Scott Martin, George Malpas, Willoughby Goddard, Michael Hordern, P3L01, PelÃ­culas' },
						] } 
            ] },
        'estrenos': {
            title: 'MAS RECIENTE', carousels: [ {
                        id: 'PelÃ­culas2', data: [ {
                        			id: '1_8su9YgJ42xCpehpZkYII1nua-mlQWOO', youtubeId: 'wg8_JUvvRgg', buttonId: '1S8OkwTCXViFarJ85XyRvbw', title: 'LAND OF SIN', subtitle: 'La Tierra Del Pecado) (2026)', buscar: 'P3ROIZ' }, {
                        			id: '10xgFzQ3pTyAeh_OpH-L7fLKiL3N-2XCH', youtubeId: 'yFzSe2Nuys4', buttonId: '1kcjXOAuOGd2cBJ6F9jpnlg', title: 'CHEETAHS UP CLOSE WITH BERTIE GREGORY', subtitle: 'Guepardos En Primer Plano Con Bertie Gregory (2026)', buscar: 'P3ROIZ' }, {
                        			id: '19TnSPSE_CsTNaUVI-dwUr1W6gO2Fdykr', youtubeId: '8FudANSsWNQ', buttonId: '1-JqSGTx1SkG6ujEBhCC5dQ', title: 'FINAL DESTINATION: BLOODLINES', subtitle: 'Destino Final: Linajes (2025)', buscar: 'S3R01G' }, {
                             id: '1WPGCKUicB2pAGzriNolwSsYo3pIBDN2P', youtubeId: 'Z2H3KY3Wnr4', buttonId: '18yxO6QkrCs28ymHEWFKSIw', title: 'DINASTIA CASILLAS', subtitle: 'DinastÃ­a Casillas (2025)', subtitle2: '1 Temporada 50 Episodios', buscar: 'El SeÃ±or De Los Cielos, P3ROIZG' }, {
                        	    id: '1J_EFte8kd3WB8KxXRkNgc9Ff-cD61C3O', youtubeId: '5gquha3ICHE', buttonId: '1ZEvaj9VriI5OAFDszLRSbw', title: 'SQUID GAME', subtitle: 'El Juego del Calamar (2021-25)', subtitle2: '3 Temporada 22 Episodios', buscar: 'S3R01' }, {
                        		id: '1MZkGA1SQonGS-gmz7UOhQbdU9IejkZ_5', youtubeId: 'eotAOKm4l18', buttonId: '1zRA0mxO0XUhmOkN3iEOHQA', title: 'ALIEN: EARTH', subtitle: 'Alien: Planeta Tierra (2025)', subtitle2: '1 Temporada 8 Episodios', buscar: 'P3L00' }, {
                        		id: '1OfVWpDfjOpvAIiiQvOSAas0MGKveZwG7', youtubeId: 'ixVlecN1Jnw', buttonId: '19XZ45pprU0WNrcDaw7kHug', title: 'SOY FRANKELDA', subtitle: 'Soy Frankelda: La PelÃ­cula (2025)', buscar: 'P3L00' }, {
                        		id: '1oXevdN-mXo1yfTIdwmNJAyMFy8IrQr1c', youtubeId: 'HvTnvWjM5gY', buttonId: '1HCMxOWpc_TGa_xpIRdhdcg', title: 'APOCALYPSE: THE LANDING OF NORMANDY', subtitle: 'Apocalipsis: El desembarco de NormandÃ­a (2024)', subtitle2: '1 Temporada 2 Episodios', buscar: 'P3L01' }, {
                        		id: '1VpcTfi7_JDHYshfA--cUFLl7RihUP2qh', youtubeId: 'YUDbl9qBihk', buttonId: '1V4XOXvy9bTMP9LYgPurF3w', title: 'DRAGON BALL DAIMA', subtitle: 'Dragon Ball Daima (2024)', subtitle2: '1 Temporada 20 Episodios', buscar: 'S3R01' }, {
                        		id: '1GUENgqotu2IFlgoISlNF_xcw9QlHoq7N', youtubeId: 'pDgBUVuKXKk', buttonId: '13XZAbXJBVaN-Z4nmnBo0Ug', title: '200% WOLF', subtitle: '200% Lobo (2024)', buscar: '100% Wolf, 100 Wolf, S3R01' }, {
                        		id: '1hwGT-DjHI4hYhwG_qBSta4igNRNh26Iv', youtubeId: '0JCq_hmNhJs', buttonId: '1xH-bwpuGxXhbityu2mPvtQ', title: 'SQUID GAME: THE CHALLENGE', subtitle: 'El Juego Del Calamar: El desafÃ­o (2023)', subtitle2: '1 Temporada 10 Episodios', buscar: 'S3R01' }, {
                        		id: '1FZcdIt-xfUft_wQ8vaLpSzaermzT-YQJ', youtubeId: 'qhCOAuzcQXY', buttonId: '1LcplNXdFGragDK45_h-YKA', title: '500 DIAS DE ESCOBAR', subtitle: '500 DÃ­as De Escobar (2023)', buscar: 'P3L01' }, {
                                id: '137YFz_v6vzB8MJuvbloiJEwUH_lIyWVW', youtubeId: 'lnewrKA6BzY', buttonId: '1GqyJeSYrLOt_8248ABwd2Q', title: 'SUPER DRAGON BALL HEROES', subtitle: 'Super Dragon Ball Heroes (2018)', subtitle2: '5 Temporads 49 Episodios', buscar: 'S3R01' }, {                         
                                id: '1G2PCA4EyFw22UbeT-0j4xsEzuBerRfHg', youtubeId: 'IEnmRWU1A1Y', buttonId: '13pNNdoN1OwiG6udYNNRToQ', title: 'EL CAPO', subtitle: 'El Capo (2009-14)', subtitle2: '3 Temporadas 223 Episodios', buscar: 'S3R01' }, {
                                id: '1563acEZ4GTAFo2iHI7_dMnuCY6wwR1CP', youtubeId: 'TP5Dhz1LXUg', buttonId: '1OG3dAIacyMYX4wkiRR1j5w', title: 'COMBAT!', subtitle: 'Combate! (1962)', subtitle2: '1 Temporada 31 Episodios', buscar: 'P3L01' }, {
                                id: '1doMHOa8ot_WCH1RLHOn4Hb4Xwk1MDuw3', youtubeId: '148kmAGwMgU', buttonId: '1laIMQYLUXMvBg13LSnokSA', title: 'THE MUNSTERS', subtitle: 'La familia Monster (1964-65)', subtitle2: '2 Temporadas 70 Episodios', buscar: 'P3ROIZ' }, {
                                id: '12NojynOBFClLAX4gkFTjdpqPZa8gAglZ', youtubeId: 'cfawtDT945o', buttonId: '1qmcBwWeA0OmlKVBF9bCdSA', title: 'THE ADDAMS FAMILY', subtitle: 'Los Locos Addams (1964)', subtitle2: '2 Temporadas 64 Episodios', buscar: 'P3ROIZ' }, {
                                id: '1EJDdKM2ao6wLAfG5KXnuVQhm3Uca2v0r', youtubeId: '56601nxTJ2I', buttonId: '1tY0_cFlif5TnnwoiBTQhsA', title: 'THE GREEN HORNET', subtitle: 'El AvispÃ³n Verde (1966)', subtitle2: '1 Temporada 26 Episodios', buscar: 'P3ROIZ' },
                        ] }
            ] }
        };

        const allImages = Object.values(allData).flatMap(c => c.carousels.flatMap(car => car.data));
        const youtubePlayer = document.getElementById('youtube-player');
        const searchInput = document.getElementById('image-search-input');
        const actionButton = document.getElementById('action-button');
        const searchModalTitle = document.getElementById('search-modal-title');
        let currentUrl = 'https://www.terabox.com/';

        function cleanText(text) {
            if (!text) return "";
            return text.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g, "").replace(/[^a-z0-9]/g, "").trim();
        }

        let searchTimeout;
        searchInput.addEventListener('input', (e) => {
            const val = e.target.value;
            searchModalTitle.textContent = val.toUpperCase() || "RESULTADOS";
            clearTimeout(searchTimeout);
            searchTimeout = setTimeout(() => filterData(val), 400);
        });

        function filterData(query) {
            const q = cleanText(query);
            const searchModal = document.getElementById('search-modal');
            const resultsGrid = document.getElementById('search-results-grid');
            const emptyMsg = document.getElementById('search-empty');
            
            if (q.length > 0) {
                const results = allImages.filter(i => 
                    cleanText(i.title).includes(q) || cleanText(i.buscar).includes(q) || cleanText(i.subtitle).includes(q) || (i.subtitle2 && cleanText(i.subtitle2).includes(q))
                );
                searchModal.classList.add('active');
                resultsGrid.innerHTML = '';
                if (results.length > 0) {
                    emptyMsg.classList.add('hidden');
                    results.forEach(item => {
                        const div = document.createElement('div');
                        div.className = 'cursor-pointer group flex flex-col gap-1.5';
                        div.onclick = () => selectMedia(item);
                        div.innerHTML = `<div class="relative overflow-hidden rounded-xl bg-gray-900 border border-white/5 aspect-video"><img src="https://drive.google.com/thumbnail?id=${item.id}" class="w-full h-full object-cover transition-transform group-hover:scale-105"/></div><div class="min-w-0"><h4 class="text-[9px] font-bold text-gray-100 truncate uppercase leading-tight">${item.title}</h4><p class="text-[8px] text-gray-400 truncate leading-tight mt-0.5">${item.subtitle}</p></div>`;
                        resultsGrid.appendChild(div);
                    });
                } else { emptyMsg.classList.remove('hidden'); }
            } else { closeSearchModal(); }
        }

        function selectMedia(item) {
            // SE AGREGA ?enablejsapi=1 A LA URL DEL VIDEO PARA PODER CONTROLARLO
            youtubePlayer.src = `https://www.youtube.com/embed/${item.youtubeId}?autoplay=1&rel=0&enablejsapi=1`;
            currentUrl = item.buttonId ? `https://1024terabox.com/s/${item.buttonId}` : 'https://www.terabox.com/';
            localStorage.setItem('lastViewed', JSON.stringify(item));
            closeNewsModal();
            closeSearchModal();
        }

        function closeSearchModal() { 
            document.getElementById('search-modal').classList.remove('active');
            searchInput.value = '';
        }

        function renderCarousel(container, data) {
            container.innerHTML = '';
            data.forEach(item => {
                const div = document.createElement('div');
                div.className = 'carousel-item group cursor-pointer';
                div.onclick = () => selectMedia(item);
                div.innerHTML = `<div class="relative overflow-hidden rounded-xl bg-gray-900 border border-white/5 aspect-video"><div class="skeleton absolute inset-0"></div><img src="https://drive.google.com/thumbnail?id=${item.id}" class="absolute inset-0 w-full h-full object-cover opacity-0 transition-opacity duration-500" onload="this.style.opacity='1'; this.previousElementSibling.style.display='none'"/></div><div class="mt-1.5 px-0.5 min-w-0"><h4 class="text-[10px] font-bold text-gray-100 truncate uppercase leading-tight">${item.title}</h4><p class="text-[9px] text-gray-400 truncate leading-tight mt-0.5">${item.subtitle}</p><p class="text-[9px] text-gray-400 truncate leading-tight mt-0.5 italic">${item.subtitle2 || ''}</p></div>`;
                container.appendChild(div);
            });
        }

        function showNews() {
            const estrenos = allData.estrenos.carousels[0].data;
            const list = document.getElementById('news-list');
            list.innerHTML = '';
            estrenos.forEach(item => {
                const div = document.createElement('div');
                div.className = "flex items-center gap-3 bg-white/5 p-2 rounded-xl border border-white/5 cursor-pointer hover:bg-white/10 transition";
                div.onclick = () => selectMedia(item);
                div.innerHTML = `<img src="https://drive.google.com/thumbnail?id=${item.id}" class="w-12 h-8 object-cover rounded shadow" /><div class="flex-1 min-w-0"><p class="text-white text-[10px] font-black truncate uppercase leading-tight">${item.title}</p><p class="text-gray-400 text-[8px] truncate mt-0.5">${item.subtitle}</p></div>`;
                list.appendChild(div);
            });
            document.getElementById('news-modal').classList.add('active');
        }

        function closeNewsModal() { document.getElementById('news-modal').classList.remove('active'); }

        document.addEventListener('DOMContentLoaded', () => {
            const section = document.getElementById('original-carousels-section');
            Object.values(allData).forEach(cat => {
                const div = document.createElement('div');
                div.className = 'mb-5';
                div.innerHTML = `<h2 class="text-xs font-black mb-1.5 px-2 text-gray-400 border-l-2 border-blue-600 ml-1 uppercase tracking-tight">Â ${cat.title}</h2>`;
                cat.carousels.forEach(c => {
                    const wrap = document.createElement('div');
                    wrap.className = 'carousel-wrapper';
                    renderCarousel(wrap, c.data);
                    div.appendChild(wrap);
                });
                section.appendChild(div);
            });
            const saved = localStorage.getItem('lastViewed');
            if (saved) {
                const item = JSON.parse(saved);
                youtubePlayer.src = `https://www.youtube.com/embed/${item.youtubeId}?autoplay=0&rel=0&enablejsapi=1`;
                currentUrl = item.buttonId ? `https://1024terabox.com/s/${item.buttonId}` : 'https://www.terabox.com/';
            } else if (allImages.length > 0) {
                selectMedia(allImages[0]);
            }
            setTimeout(showNews, 1500);
        });

        actionButton.onclick = () => window.open(currentUrl, '_blank');

        // --- LÃ“GICA CHAT WHATSAPP ---
        const MI_TELEFONO = "525621896010";
        const HORA_INICIO = 9;
        const HORA_FIN = 18;
        const waCard = document.getElementById('waCard');
        const waInput = document.getElementById('waInput');
        const waLauncher = document.getElementById('waLauncher');
        const waBadge = document.getElementById('waBadge');

        const hours = new Date().getHours();
        const status = document.getElementById('waStatus');
        document.getElementById('pageTarget').innerText = document.title;
        if (hours >= HORA_INICIO && hours < HORA_FIN) {
            status.innerText = "â— En lÃ­nea"; status.style.color = "#4ffb8a";
        } else {
            status.innerText = "â—‹ Fuera de linea"; status.style.color = "#ffb347";
        }

        function toggleChat() {
            if (waCard.style.display === 'flex') {
                waCard.style.display = 'none';
                waLauncher.style.animation = "wa-pulse 3s infinite";
            } else {
                waCard.style.display = 'flex';
                waLauncher.style.animation = "none";
                waBadge.style.display = 'none';
                const typing = document.getElementById('waTyping');
                const msg = document.getElementById('waMsg');
                if (msg.style.display === 'none') {
                    typing.style.display = 'block';
                    setTimeout(() => { typing.style.display = 'none'; msg.style.display = 'block'; }, 1200);
                }
                waInput.focus();
            }
        }

        function sendToWhatsapp() {
            const text = waInput.value.trim();
            if (text !== "") {
                const contexto = `(Desde: ${document.title}) `;
                window.open(`https://wa.me/${MI_TELEFONO}?text=${encodeURIComponent(contexto + text)}`, '_blank');
                waInput.value = ""; toggleChat();
            }
        }

        waInput.addEventListener('keypress', (e) => { if (e.key === 'Enter') sendToWhatsapp(); });
        if (window.visualViewport) {
            window.visualViewport.addEventListener('resize', () => {
                const keyboardHeight = window.innerHeight - window.visualViewport.height;
                waCard.style.bottom = keyboardHeight > 50 ? (keyboardHeight + 10) + 'px' : '90px';
            });
        }
    </script>
</body>
</html>